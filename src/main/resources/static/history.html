<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TU REPAIR - ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</title>
  <link rel="stylesheet" href="history.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- ===== Header ===== -->
  <header>
    <div class="logo">TU REPAIR</div>
    <nav>
      <ul>
        <li><a href="RepairRequest.html">‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°<br>( Repair Request )</a></li>
        <li><a href="track.html">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞<br>( Track Request )</a></li>
        <li class="active">
          <a href="history.html">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°<br>( Request History )</a>
        </li>
      </ul>
    </nav>
    <div class="user-profile">
      <div class="profile-pic">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
      </div>
      <div class="user-details">
        <div class="user-name" id="currentUserName">Loading...</div>
        <div class="user-email" id="currentUserEmail"></div>
      </div>
      <div class="logout-icon" id="logoutBtn" aria-label="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö" style="cursor:pointer;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
      </div>
    </div>
  </header>

  <!-- ===== Main ===== -->
  <main>
    <div class="container history-wrapper">
      <div class="history-head">
        <div class="title-block">
          <div class="title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</div>
          <div class="subtitle">( Request History )</div>
        </div>

        <div class="toolbar">
          <div class="search">
            <span class="search-icon">üîç</span>
            <input id="searchInput" type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á / ‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á / ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"/>
          </div>

          <div class="filter">
            <button id="filterBtn" class="filter-btn">
              <span>Filter</span>
            </button>
            <div id="filterPanel" class="filter-panel hidden" role="menu">
              <label><input type="radio" name="sortBy" value="createdAt" checked> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</label>
              <label><input type="radio" name="sortBy" value="closedAt"> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à</label>
            </div>
          </div>
        </div>
      </div>

      <div class="table-card">
        <table class="history-table" aria-label="‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°">
          <thead>
            <tr>
              <th>‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á</th>
              <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</th>
              <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á</th>
              <th>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö</th>
              <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à</th>
              <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°</th>
              <th class="th-actions"></th>
            </tr>
          </thead>
          <tbody id="historyTbody">
            <!-- rows inserted by JS -->
          </tbody>
        </table>

        <div class="empty-state hidden" id="emptyState">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
      </div>

      <div class="pager">
        <div class="pager-left">
          <button class="text-btn" id="backToTrack">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        </div>
        <div class="pager-mid" id="pageNumbers"><!-- 01 02 03 ... --></div>
        <div class="pager-right">
          <button class="text-btn" id="nextPageBtn">‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ûú</button>
        </div>
      </div>
    </div>
  </main>

  <!-- ===== Detail Modal ===== -->
  <div id="detailModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°">
    <div class="modal-card modal--history">
      <div class="modal-header">
        <div class="mh-left">
          <h3 class="modal-title" id="dm-title">-</h3>
          <div class="modal-sub">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°</div>
        </div>
        <div class="mh-right">
          <span id="dm-status" class="pill gray">-</span>
        </div>
      </div>

      <div class="modal-body modal-body--history">
        <div class="row r1">
          <div class="cell">
            <input id="dm-created" class="ro ro--date" type="text" readonly placeholder="DD/MM/YYYY" />
          </div>
          <div class="cell right-info">
            <div class="info-inline"><span class="lbl">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á :</span> <span id="dm-reporter">-</span></div>
            <div class="info-inline"><span class="lbl">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö :</span> <span id="dm-assignee">-</span></div>
          </div>
        </div>

        <div class="row r2">
          <div class="info-box">
            <span class="lbl">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà :</span>
            <span id="dm-location">-</span>
          </div>
          <div class="info-box">
            <span class="lbl">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô :</span>
            <span id="dm-category">-</span>
          </div>
        </div>

        <div class="row r3">
          <textarea id="dm-desc" class="ro ro--note" readonly placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"></textarea>
        </div>

        <div class="row r4">
          <div class="image-box" id="dm-imageBox">
            <img id="dm-image" alt="‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°" />
            <div class="img-placeholder" id="dm-imgPh">
              <svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" stroke="currentColor"
                stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="color:#9ca3af">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer modal-footer--history">
        <button id="dm-reportBtn" class="btn-yellow">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°</button>
        <div class="spacer"></div>
        <button id="dm-closeBtn" class="btn-ghost">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      </div>
    </div>
  </div>

  <!-- ===== Repair Report Modal ===== -->
  <div id="reportModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≤‡∏á">
    <div class="modal-card modal--report">
      <div class="modal-header">
        <div class="mh-left">
          <h3 class="modal-title" id="rm-title">-</h3>
          <div class="modal-sub">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°</div>
        </div>
        <div class="mh-right">
          <span id="rm-status" class="pill gray">-</span>
        </div>
      </div>

      <div class="modal-body report-body">
        <div class="report-row r1">
          <div class="report-box">
            <input id="rm-date" class="ro ro--date" type="text" readonly placeholder="DD/MM/YYYY" />
          </div>
          <div class="report-box info-grid">
            <div class="info-inline"><span class="lbl">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô :</span> <span id="rm-category">-</span></div>
            <div class="info-inline"><span class="lbl">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà :</span> <span id="rm-location">-</span></div>
            <div class="info-inline"><span class="lbl">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á :</span> <span id="rm-reporter">-</span></div>
            <div class="info-inline"><span class="lbl">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö :</span> <span id="rm-assignee">-</span></div>
          </div>
        </div>

        <div class="report-row r2">
          <textarea id="rm-text" class="ro ro--note" readonly placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°"></textarea>
        </div>

        <div class="report-row r3">
          <div class="image-box" id="rm-imageBox">
            <img id="rm-image" alt="‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏±‡∏á‡∏ã‡πà‡∏≠‡∏°" />
            <div class="img-placeholder" id="rm-imgPh">
              <svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" stroke="currentColor"
                stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="color:#9ca3af">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer report-footer">
        <button id="rm-feedbackBtn" class="btn-yellow hidden">‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞</button>
        <div class="spacer"></div>
        <button id="rm-closeBtn" class="btn-ghost">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      </div>
    </div>
  </div>

  <!-- ===== Feedback Modal ===== -->
  <div id="feedbackModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞">
    <div class="modal-card fb-card">
      <div class="modal-header">
        <div>
          <h3 class="modal-title">‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞</h3>
          <div class="modal-sub">‡πÇ‡∏õ‡∏£‡∏î‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏ö‡∏≠‡∏Å‡πÄ‡∏£‡∏≤‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</div>
        </div>
      </div>

      <div class="modal-body fb-body">
        <section class="fb-section">
          <div class="fb-title">‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
          <div class="fb-sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (1 = ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á, 5 = ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°)</div>

          <div class="stars" id="fb-stars" aria-label="‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡∏≤‡∏ß" role="radiogroup">
            <button class="star-btn" data-value="1" aria-label="1 ‡∏î‡∏≤‡∏ß" role="radio" aria-checked="false">‚òÖ</button>
            <button class="star-btn" data-value="2" aria-label="2 ‡∏î‡∏≤‡∏ß" role="radio" aria-checked="false">‚òÖ</button>
            <button class="star-btn" data-value="3" aria-label="3 ‡∏î‡∏≤‡∏ß" role="radio" aria-checked="false">‚òÖ</button>
            <button class="star-btn" data-value="4" aria-label="4 ‡∏î‡∏≤‡∏ß" role="radio" aria-checked="false">‚òÖ</button>
            <button class="star-btn" data-value="5" aria-label="5 ‡∏î‡∏≤‡∏ß" role="radio" aria-checked="false">‚òÖ</button>
          </div>

          <div class="fb-hint" id="fb-hint">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
        </section>

        <section class="fb-section">
          <div class="fb-title">‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
          <div class="fb-sub">‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à</div>

          <textarea id="fb-text" class="fb-textarea" maxlength="500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
          <div class="fb-counter"><span id="fb-count">0</span>/500</div>
        </section>
      </div>

      <div class="modal-footer fb-footer">
        <button id="fb-submit" class="btn-submit">‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</button>
        <div class="spacer"></div>
        <button id="fb-cancel" class="btn-ghost">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      </div>
    </div>
  </div>

  <script src="history.js"></script>
</body>
</html>
